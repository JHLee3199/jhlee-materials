/* ================== Theme tokens ================== */
:root{
  /* 다크(기본) */
  --bg: #0b0c0e; --surface: #121417; --text: #e6e9ef; --muted: #a8b0bd;
  --accent: #7cd4ff; --card: #15181c; --border: #232832; --link: #8ad5ff;
  --shadow: 0 10px 30px rgba(0,0,0,.35);

  /* 사이드바 레이아웃 */
  --sidebar-w: 260px;   /* 사이드바 폭 */
  --sidebar-gap: 24px;  /* 본문과 간격 */
}
[data-theme="light"]{
  --bg:#f7f8fb; --surface:#fff; --text:#121417; --muted:#3d4350; --accent:#007aff;
  --card:#fff; --border:#e6e9ef; --link:#005bcb; --shadow:0 10px 24px rgba(2,16,43,.08);
}

/* ================== Global ================== */
*,*::before,*::after{ box-sizing:border-box; }
html,body{ height:100%; }
body{
  margin:0; background:var(--bg); color:var(--text);
  font-family:"Pretendard",system-ui,-apple-system,Segoe UI,Roboto,"Noto Sans KR","Apple SD Gothic Neo",sans-serif;
  line-height:1.65; letter-spacing:.2px;
}

/* 본문 컨테이너: 사이드바 폭만큼 오른쪽으로 밀기 (데스크톱) */
.container{
  max-width: 1120px;
  margin: 0 auto;
  padding: 24px;
  margin-left: calc(var(--sidebar-w) + var(--sidebar-gap));
}

/* ================== Topbar ================== */
header{
  position: sticky; top: 0; z-index: 10;
  backdrop-filter: blur(8px);
  border-bottom: 1px solid var(--border);
  background: color-mix(in oklab, var(--bg), transparent 35%);
}
.toprow{
  display:flex; align-items:center; justify-content:space-between; gap:16px;
  padding: 10px 24px;
  padding-left: calc(24px + var(--sidebar-w) + var(--sidebar-gap));
}
.brand{ font-weight:700; letter-spacing:.2px; display:flex; align-items:center; gap:8px; }
.brand-badge{
  font-weight:600; font-size:12px; letter-spacing:.3px;
  padding:4px 8px; border:1px solid var(--border); border-radius:999px;
  background:var(--surface); color:var(--muted);
}
.btn{
  display:inline-flex; align-items:center; gap:8px;
  border:1px solid var(--border); background:var(--surface); color:var(--text);
  padding:10px 14px; border-radius:12px; text-decoration:none; box-shadow:var(--shadow);
}
.btn:hover{ transform: translateY(-1px); }

/* ================== Sidebar (데스크톱 기본) ================== */
.sidenav{
  position: fixed;
  top: 0; left: 0; bottom: 0;
  width: var(--sidebar-w);
  overflow-y: auto;
  background: var(--surface);
  border-right: 1px solid var(--border);
  padding-top: 64px;              /* 상단바 높이만큼 띄움 */
  box-shadow: var(--shadow);
}
.sidenav a{
  display:block; padding:12px 20px; color:var(--text); font-weight:500; text-decoration:none;
  border-bottom:1px dashed color-mix(in oklab, var(--border), transparent 55%);
}
.sidenav a:hover{
  background: color-mix(in oklab, var(--surface), var(--border) 12%);
}
.sidenav a.active{
  background: color-mix(in oklab, var(--surface), var(--border) 18%);
}

/* ================== Content blocks ================== */
.hero{
  display:grid; grid-template-columns:minmax(340px,460px) minmax(0,1fr);
  gap:28px; margin-top:28px; align-items:start;
}
.hero > .grid{ display:flex; flex-direction:column; gap:20px; align-items:stretch; }
.hero-card{
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 20px;
  padding: 16px 28px 28px;
  box-shadow:var(--shadow);
  height:auto; max-height:none; overflow:visible;
}

h1{ line-height:1.2; margin:0 0 8px; overflow-wrap:anywhere; }
h3{ font-size:18px; margin:0 0 10px; letter-spacing:.2px; }
p{ margin:0 0 10px; }
.muted{ color:var(--muted); }

.card{
  background:var(--card); border:1px solid var(--border);
  border-radius:16px; padding:18px; box-shadow:var(--shadow);
}
.kvs{ display:grid; grid-template-columns:130px 1fr; gap:10px; }
.kvs > div:first-child{ white-space:nowrap; }

.row{ display:flex; flex-wrap:wrap; gap:8px; }
.avatar{
  width:100%; height:auto; aspect-ratio:1/1; object-fit:cover;
  border-radius:20px; border:1px solid var(--border); display:block; box-shadow:var(--shadow);
}

/* ================== Publications (있다면) ================== */
.container.publications-wide{ max-width: 1200px; }
.pub-list.nice{ list-style:none; margin:0; padding:0; counter-reset:pub; display:grid; gap:14px; }
.pub-list.nice > .pub{
  counter-increment:pub; display:grid; grid-template-columns:3ch 1fr; gap:10px 14px; align-items:start;
  background:var(--card); border:1px solid var(--border); border-radius:12px; padding:16px 18px; box-shadow:0 1px 0 rgba(0,0,0,.03);
}
.pub-list.nice > .pub::before{ content:counter(pub) "."; font-weight:700; color:var(--muted); line-height:1.4; padding-top:2px; }
.pub-title{ font-size:1.06rem; font-weight:700; line-height:1.35; letter-spacing:.1px; margin:0 0 2px 0; word-break:keep-all; overflow-wrap:anywhere; color:var(--text); }
.pub-sub{ display:flex; flex-wrap:wrap; gap:6px; align-items:baseline; font-size:.96rem; line-height:1.55; color:var(--muted); position:relative; }
.pub-authors{ color:var(--text); }
.pub-sub em{ font-style:italic; color:var(--text); }
.pub-sub .sep{ margin:0 2px; color: color-mix(in oklab, var(--muted), #ffffff 10%); }
.year-badge{ display:inline-block; margin-left:8px; padding:2px 8px; border-radius:999px; border:1px solid var(--border); background: color-mix(in oklab, var(--surface), #ffffff 4%); color:var(--text); font-weight:600; font-size:.86rem; }
.pdf-link{ margin-left:auto; padding:2px 10px; border:1px solid var(--border); border-radius:999px; background: color-mix(in oklab, var(--surface), #ffffff 4%); color:var(--link); text-decoration:none; font-size:.86rem; line-height:1.6; font-weight:600; transition:transform .12s ease, background .12s ease, border-color .12s ease; }
.pdf-link:hover{ transform:translateY(-1px); background: color-mix(in oklab, var(--surface), var(--border) 12%); border-color: color-mix(in oklab, var(--border), #ffffff 15%); text-decoration:none; }
.pdf-link::before{ content:"⬇︎"; margin-right:6px; font-size:.9em; opacity:.9; }

/* ================== Responsive ================== */
/* 데스크톱 → 모바일 공통 축소 */
@media (max-width: 920px){
  /* 본문은 좌측 패딩 제거 */
  .container{ margin-left: 16px; }
  .toprow{ padding-left: 24px; }
}

/* ======= 여기부터: 모바일 오프캔버스 내비게이션 ======= */

/* 메뉴 버튼(모바일에서만 보이게) */
.menu-btn{
  display:none;
  border:1px solid var(--border);
  background:var(--surface);
  color:var(--text);
  padding:8px 12px;
  border-radius:10px;
  font-size:18px;
}
@media (max-width: 920px){
  .menu-btn{ display:inline-flex; align-items:center; }
}

/* 모바일에서 사이드바를 화면 밖에 두었다가 open일 때만 보이게 */
@media (max-width: 920px){
  .sidenav{
    left:-100%;
    width: min(80vw, 300px);
    transition:left .28s ease;
    z-index:1000;
  }
  .sidenav.open{ left:0; }
}

/* 배경 오버레이 */
.overlay{
  position:fixed; inset:0;
  background:rgba(0,0,0,.42);
  z-index:999;
  display:block;
}
.overlay[hidden]{ display:none; }

/* 메뉴 열렸을 때 바디 스크롤 잠금 */
body.menu-open{ overflow:hidden; }

/* 작은 화면에서 Publication 카드도 살짝 축소 */
@media (max-width:560px){
  .container.publications-wide{ max-width:94%; }
  .pub-list.nice > .pub{ grid-template-columns: 2ch 1fr; padding:12px 12px; }
  .pub-title{ font-size:1.02rem; }
}
/* === Mobile fixes for Home layout === */

/* 1) 절대 가로 스크롤 방지 */
html, body { overflow-x: hidden; }

/* 2) 모바일에서는 hero를 1열로 쌓기 */
@media (max-width: 920px){
  .hero{ display: block; }
  .hero > .grid{ margin-bottom: 16px; }
}

/* 3) 긴 제목이 한 글자씩 줄바꿈되지 않도록 */
.hero-card h1{
  word-break: normal;           /* 단어 중간 줄바꿈 금지 */
  overflow-wrap: break-word;    /* 너무 길면 단어 단위로만 줄바꿈 */
}

/* 4) 작은 화면에서 제목/브랜드 크기 조정 */
@media (max-width: 560px){
  .hero-card h1{ font-size: 22px; line-height: 1.25; }
  .brand{ font-size: 16px; }
  .brand-badge{ font-size: 11px; padding: 3px 6px; }
}

/* 5) 카드 내부 key–value 표 레이아웃이 과도하게 넓지 않게 */
@media (max-width: 560px){
  .kvs{ grid-template-columns: 110px 1fr; } /* 라벨폭 살짝 축소 */
}

/* 6) 아바타 이미지가 부모 폭을 넘지 않도록 보장 */
.avatar{ max-width: 100%; height: auto; display: block; }